{"ast":null,"code":"import React,{useState,useEffect}from'react';import{createClient}from'contentful';import'./styles/CalendarPage.css';// Make sure the path is correct\n// Use environment variables for Contentful access\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const spaceId=process.env.REACT_APP_CONTENTFUL_SPACE_ID;const accessToken=process.env.REACT_APP_CONTENTFUL_ACCESS_TOKEN;const client=createClient({space:spaceId,accessToken:accessToken});function CalendarPage(){const[projects,setProjects]=useState([]);useEffect(()=>{client.getEntries({content_type:'caseStudy'}).then(response=>{const projectsWithDates=response.items.map(item=>{if(typeof item.fields.eventDates==='string'){try{item.fields.eventDates=JSON.parse(item.fields.eventDates);}catch(error){console.error('Error parsing eventDates:',error);}}return item;});setProjects(projectsWithDates);}).catch(console.error);},[]);const formatDate=dateString=>{const date=new Date(dateString);const day=date.getDate();const month=date.toLocaleString('en-US',{month:'long'});return\"\".concat(day,\" \").concat(month);};const formatEventDate=dateEntry=>{if(typeof dateEntry==='string'){return formatDate(dateEntry);}else if(dateEntry.start&&dateEntry.end){const startDate=new Date(dateEntry.start);const endDate=new Date(dateEntry.end);if(startDate.getMonth()===endDate.getMonth()&&startDate.getFullYear()===endDate.getFullYear()){return\"\".concat(startDate.getDate(),\"-\").concat(endDate.getDate(),\" \").concat(startDate.toLocaleString('en-US',{month:'long'}));}else{return\"\".concat(formatDate(dateEntry.start),\" - \").concat(formatDate(dateEntry.end));}}return'';};const flattenProjects=projects=>{let flattened=[];projects.forEach(project=>{var _project$fields$event;(_project$fields$event=project.fields.eventDates)===null||_project$fields$event===void 0?void 0:_project$fields$event.dates.forEach(event=>{const dateKey=typeof event==='string'?event:event.start;const year=new Date(dateKey).getFullYear();const location=event.location||\"Unknown Location\";// Default if missing\nflattened.push({year,dateKey,formattedDate:formatEventDate(event),location,project});});});return flattened;};const flattenedProjects=flattenProjects(projects);const groupedByYear=flattenedProjects.reduce((acc,item)=>{if(!acc[item.year]){acc[item.year]=[];}acc[item.year].push(item);return acc;},{});const sortedYears=Object.keys(groupedByYear).sort((a,b)=>b-a);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Calendar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-container\",children:sortedYears.map((year,index)=>{const additionalClass=index>=2?'year-section-margin':'';const sortedEvents=groupedByYear[year].sort((a,b)=>new Date(a.dateKey)-new Date(b.dateKey));return/*#__PURE__*/_jsxs(\"div\",{className:\"year-section \".concat(additionalClass),children:[/*#__PURE__*/_jsx(\"h2\",{children:year}),sortedEvents.map(_ref=>{let{formattedDate,location,project}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"date-row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"event-date\",children:formattedDate}),/*#__PURE__*/_jsx(\"p\",{className:\"show-title\",children:project.fields.title}),/*#__PURE__*/_jsx(\"p\",{className:\"location-name\",children:location})]},\"\".concat(formattedDate,\"-\").concat(location,\"-\").concat(project.sys.id));})]},year);})})]});}export default CalendarPage;","map":{"version":3,"names":["React","useState","useEffect","createClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","spaceId","process","env","REACT_APP_CONTENTFUL_SPACE_ID","accessToken","REACT_APP_CONTENTFUL_ACCESS_TOKEN","client","space","CalendarPage","projects","setProjects","getEntries","content_type","then","response","projectsWithDates","items","map","item","fields","eventDates","JSON","parse","error","console","catch","formatDate","dateString","date","Date","day","getDate","month","toLocaleString","concat","formatEventDate","dateEntry","start","end","startDate","endDate","getMonth","getFullYear","flattenProjects","flattened","forEach","project","_project$fields$event","dates","event","dateKey","year","location","push","formattedDate","flattenedProjects","groupedByYear","reduce","acc","sortedYears","Object","keys","sort","a","b","children","className","index","additionalClass","sortedEvents","_ref","title","sys","id"],"sources":["/Users/araya/Dropbox/my-real-job/websites/Client/ab/src/CalendarPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { createClient } from 'contentful';\nimport './styles/CalendarPage.css'; // Make sure the path is correct\n\n// Use environment variables for Contentful access\nconst spaceId = process.env.REACT_APP_CONTENTFUL_SPACE_ID;\nconst accessToken = process.env.REACT_APP_CONTENTFUL_ACCESS_TOKEN;\n\nconst client = createClient({\n    space: spaceId,\n    accessToken: accessToken\n});\n\nfunction CalendarPage() {\n  const [projects, setProjects] = useState([]);\n\n  useEffect(() => {\n    client.getEntries({ content_type: 'caseStudy' })\n      .then(response => {\n        const projectsWithDates = response.items.map(item => {\n          if (typeof item.fields.eventDates === 'string') {\n            try {\n              item.fields.eventDates = JSON.parse(item.fields.eventDates);\n            } catch (error) {\n              console.error('Error parsing eventDates:', error);\n            }\n          }\n          return item;\n        });\n\n        setProjects(projectsWithDates);\n      })\n      .catch(console.error);\n  }, []);\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.getDate();\n    const month = date.toLocaleString('en-US', { month: 'long' });\n    return `${day} ${month}`;\n  };\n\n  const formatEventDate = (dateEntry) => {\n    if (typeof dateEntry === 'string') {\n      return formatDate(dateEntry);\n    } else if (dateEntry.start && dateEntry.end) {\n      const startDate = new Date(dateEntry.start);\n      const endDate = new Date(dateEntry.end);\n\n      if (startDate.getMonth() === endDate.getMonth() && startDate.getFullYear() === endDate.getFullYear()) {\n        return `${startDate.getDate()}-${endDate.getDate()} ${startDate.toLocaleString('en-US', { month: 'long' })}`;\n      } else {\n        return `${formatDate(dateEntry.start)} - ${formatDate(dateEntry.end)}`;\n      }\n    }\n    return '';\n  };\n\n  const flattenProjects = (projects) => {\n    let flattened = [];\n\n    projects.forEach(project => {\n      project.fields.eventDates?.dates.forEach(event => {\n        const dateKey = typeof event === 'string' ? event : event.start;\n        const year = new Date(dateKey).getFullYear();\n        const location = event.location || \"Unknown Location\"; // Default if missing\n\n        flattened.push({\n          year,\n          dateKey,\n          formattedDate: formatEventDate(event),\n          location,\n          project\n        });\n      });\n    });\n\n    return flattened;\n  };\n\n  const flattenedProjects = flattenProjects(projects);\n  const groupedByYear = flattenedProjects.reduce((acc, item) => {\n    if (!acc[item.year]) {\n      acc[item.year] = [];\n    }\n    acc[item.year].push(item);\n    return acc;\n  }, {});\n\n  const sortedYears = Object.keys(groupedByYear).sort((a, b) => b - a);\n\n  return (\n    <>\n      <h1>Calendar</h1>\n      <div className=\"calendar-container\">\n        {sortedYears.map((year, index) => {\n          const additionalClass = index >= 2 ? 'year-section-margin' : '';\n          const sortedEvents = groupedByYear[year].sort((a, b) => new Date(a.dateKey) - new Date(b.dateKey));\n\n          return (\n            <div key={year} className={`year-section ${additionalClass}`}>\n              <h2>{year}</h2>\n              {sortedEvents.map(({ formattedDate, location, project }) => (\n                <div key={`${formattedDate}-${location}-${project.sys.id}`} className=\"date-row\">\n                  <p className=\"event-date\">{formattedDate}</p>\n                  <p className=\"show-title\">{project.fields.title}</p>\n                  <p className=\"location-name\">{location}</p>\n                </div>\n              ))}\n            </div>\n          );\n        })}\n      </div>\n    </>\n  );\n}\n\nexport default CalendarPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}